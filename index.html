<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tayto Invoicing</title>
  <style>
    main {
      margin: auto;
      text-align: center;
    }

    #signature {
      border: 1px solid black;
      display: block;
      margin: auto;
      padding: 0;
    }

    #clients {
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    .client {
      border: 1px solid black;
      height: 50px;
    }
  </style>
</head>

<body>
  <main>
    <input type="text" name="" id="company" value="TAILORS CORNER - LEEDS">
    <input type="date" name="" id="">

    <div class="line-item">
      <input type="text" name="" id="description" value="built a feckin outhouse">
      <input type="text" name="" id="name" value="shane">
      <input type="number" name="" id="mon" min="0" max="24" value="8">
      <input type="number" name="" id="tue" min="0" max="24" value="8">
      <input type="number" name="" id="wed" min="0" max="24" value="0">
      <input type="number" name="" id="thu" min="0" max="24" value="0">
      <input type="number" name="" id="fri" min="0" max="24" value="0">
      <input type="number" name="" id="sat" min="0" max="24" value="0">
      <input type="number" name="" id="sun" min="0" max="24" value="0">
      <span id="total">16</span>
      <input type="number" name="" id="rate" value="18.5">
      <input type="text" name="" id="materials" value="a load of wood">
      <input type="number" name="" id="cost" value="780">
    </div>

    <label for="total">Total Â£</label>
    <input type="number" name="" id="total" value="750">

    <div>
      <label for="name">Name</label>
      <input type="text" name="" id="name">
    </div>

    <canvas id="signature" width="600"></canvas>

    <h1>Current Jobs</h1>
    <div id="clients"></div>
    <input id="new-client" />
    <button onclick="add_new_client()">Add New Job</button>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/signature_pad@2.3.2/dist/signature_pad.min.js"></script>
  <script>
    const signaturePad = new SignaturePad(document.getElementById("signature"));

    // Initialise local storage
    window.localStorage.clients = window.localStorage.clients || "[]";

    refresh_client_list();

    function refresh_client_list() {
      const clientsDiv = document.getElementById("clients");

      clientsDiv.innerHTML = ``;

      for (const client of JSON.parse(window.localStorage.clients)) {
        clientsDiv.innerHTML += `<div class="client">${client} <button onclick="remove_client('${client}')">X</button></div>`;
      }
    }

    function add_new_client() {
      const newClient = document.getElementById("new-client");
      const clients = JSON.parse(window.localStorage.clients);
      clients.push(newClient.value);
      window.localStorage.clients = JSON.stringify(clients);
      refresh_client_list();
    }

    function remove_client(id) {
      const clients = JSON.parse(window.localStorage.clients).filter(c => c != id);
      window.localStorage.clients = JSON.stringify(clients);
      refresh_client_list();
    }
  </script>
</body>

</html>